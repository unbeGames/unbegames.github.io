---
author: Arugin
title: "Rocket Science: год 1"
description: Вперед, в светлое будущее
date: 2021-02-20 20:00:00 +0300
categories: [Rocket Science, Дневник разработки]
tags: [rocket science]
image: https://clan.akamai.steamstatic.com/images/34094219/b14eaa2e19bab7fe40b0477d4dc8ab6c957d34d0_400x225.png
game: Rocket Science
---
Приветствую всех инженеров-ракетостроителей! Первое и самое важное — сегодня Rocket Science исполнился один год с момента релиза в Стиме!

Это был безумно сложный, но продуктивный год, и я хотел бы поблагодарить всех, кто был увлечен игрой всё это время. Благодаря вам, я смог поддерживать игру после релиза, выпуская патчи и обновления, и получил ценные отзывы, на которые изначально даже не рассчитывал.

Очевидно, что я не могу оставить вас без подарка! Следующее обновление будет выпущено 26 марта. Пока оно еще находится в разработке, и я расскажу вам о том, что было сделано, и раскрою часть новых фич, которые будут добавлены в нем.

Прежде всего, я обновил игру до последней версии движка. Довольно сложно предсказать, что сломается во время подобных обновлений, но кажется, что на этот раз сломалось почти все. И я потратил немало времени, исправляя все возникшие проблемы. Но зачем понадобилось что-то обновлять? Дело в том, что игра изначально была создана с использованием нового рендерера в Unity, который выдавал замечательную картинку, но шел в комплекте с большим ограничением — в игре нельзя было использовать более одной камеры (на самом деле можно, но это настолько сильно било по производительности, что фпс сразу же падал с 60 до 30 за одну дополнительную камеру).

Такое ограничение значительно тормозило развитие игры. Например, во время полета в KSP использовались как минимум 4 камеры:

- для ближней геометрии (все, что ближе 500 метров);
- для дальней геометрии (от 500 метров и до горизонта);
- для визуализации масштабированного пространства (в основном других небесных тел);
- для рендеринга кербонавтов внутри командных модулей.

Более того, одна дополнительная камера задействовалась для рендеринга эффектов входа в атмосферу. Но я мог использовать только одну камеру, у которой, к тому же, ограниченный диапазон рендеринга. К счастью, Луна могла вписаться в этот диапазон, поэтому её было видно с Земли. Но остальная часть Солнечной системы за пределами этого диапазона (кроме Солнца и звезд — они используют другие техники рендеринга) была невидима во время полета. Кроме того, невозможно было реализовать эффект входа и трения об атмосферу, а также постоянно просачивались баги с исчезающими звездами.

Последняя версия движка вводит концепцию Custom Pass. Используя его и магию шейдеров, вы можете рендерить сцену с любой точки и с любыми параметрами камеры, но без дорогостоящих затрат на полноценную вторую камеру. Это помогло мне сделать диапазон рендеринга камеры практически бесконечным, а также исправить кучу багов и подготовиться к добавлению эффектов входа ракет в атмосферу в будущем.

После этого я переключился на улучшение сборочного цеха. Я добавил очень востребованную функцию сборок. Вы можете взять любую группу деталей и сохранить ее как сборку, которая впоследствии может быть использована во время конструирования другой ракеты.

![](https://media1.giphy.com/media/Iwx79A47Vdd6FqZJG3/giphy.gif)

Одной из интересных особенностей является то, что вы можете редактировать сборку, как обычную ракету, дублировать существующую или создавать новую в любое время.

![](https://media3.giphy.com/media/HQFNBxVB0vpVHmcKFc/giphy.gif)

Я улучшил стандартную ориентацию деталей во время присоединения и оно стало более понятным и предсказуемым.

![](https://clan.akamai.steamstatic.com/images//34094219/d4862590fc300fe1bcbb2966ac242d65161f8592.png)
_Ориентация до_

![](https://clan.akamai.steamstatic.com/images//34094219/d303e1a238eebc76aa440a411731ee052152e634.png)
_Ориентация после_

![](https://clan.akamai.steamstatic.com/images//34094219/90e025311af32d4cd3318aa4319caea22a15ee47.png)
_Боковая симметричная ориентация до_

![](https://clan.akamai.steamstatic.com/images//34094219/ef28c546f96e06331a694640983017fd1301e9fc.png)
_Боковая симметричная ориентация после_

Также был переработан алгоритм, размещающий первую деталь, чтобы он был совместим с вариантами деталей.

![](https://media4.giphy.com/media/pK3C1H0fPbF4jw5GZN/giphy.gif)
_Если у первой детали есть варианты и вы выбираете один из них, то деталь автоматически будет заменяться на выбранную_

Сейчас же я работаю над режимами сборочного цеха. Планируются три режима: Выбор, Перемещение и Поворот. Несколько дополнительных режимов появятся позже.

![](https://media0.giphy.com/media/Mj5lNuiKWEfEHQVx29/giphy.gif)

Стандартный режим редактора — «Перемещение». Он похож на то, как сейчас работает сборочный цех. В этом режиме можно захватывать детали, перемещать их и прикреплять друг к другу. В режиме «Поворота» вы можете выбрать любую деталь и повернуть ее с помощью горячих клавиш или специального инструмента вращения. Вы также можете вращать уже соединенные детали, следуя набору ограничений.

В принципе, существует всего два ограничения: деталь можно поворачивать только вокруг оси соединения, а коннекторы после поворота должны попасть в слоты.

Например, деталь, прикрепленная с помощью одинарного коннектора, может поворачиваться практически на любой угол. В случае шестигранного соединения деталь можно поворачивать с шагом в 60 градусов.

В последнем режиме Вы можете выделить любую деталь без риска ее перемещения или вращения. В будущем этот режим будет использоваться для открытия свойств детали и для таких операций, как изменение корня ракеты на выбранную деталь.

В следующем обновлении будет добавлена пачка новых деталей. Пять из них уже готовы, но я пока не буду их спойлерить. Помимо улучшений сборочного цеха, вас ждут новые фичи, связанные с полетами и объединенные одной общей темой. Можете предположить, что это за тема?
