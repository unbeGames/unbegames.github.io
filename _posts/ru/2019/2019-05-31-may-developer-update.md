---
author: Arugin
title: "Дневник разработки: май"
description: Сборка ракеты
date: 2019-05-31 19:19:00 +0300
categories: [Rocket Science, Дневник разработки]
tags: [rocket science]
image: https://clan.akamai.steamstatic.com/images/34094219/7748a9cb506324b60633f00fac0e532e86896d5b_400x225.png
game: Rocket Science
---

Добрый вечер!

Сегодня я расскажу о конструировании ракет в игре «Как тебе такое, Илон Маск?».

В [январском обновлении](/ru/posts/january-developer-update/) я рассказывал о трех вариантах реализации этой системы и о том, что у меня было одно очень важное требование: эта система должна быть достаточно простой, но в то же время давать возможность комбинировать между собой детали ракет разными способами. Поразмыслив и поэкспериментировав некоторое время, я пришел к выводу, что система конструирования, основанная на слотах, подойдет лучше всего. При этом возникла другая проблема: я понял, что существует как минимум пять разных подходов к созданию такой системы, каждая со своими преимуществами и недостатками.

Давайте представим, что у нас есть четыре классические детали ракеты: командный модуль, отделитель, топливный бак и реактивный двигатель.

![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/58318005c8e2bad1998b403ed7bf41032a385fed.png)

**Замечание:** _это и последующие изображениия взяты из процесса прототипирования_

Я хотел, чтобы система слотов проверяла, выполняется ли следующий набор правил:
- вы можете присоединять друг к другу топливные баки в любых количествах;
- вы не можете прикрепить двигатель к командному модулю или к отделителю;
- вы не можете присоединить ни одну из перечисленных деталей сверху командного модуля.  

Первая пришедшая мысль была ограничить соединения по типу деталей. Например, у командного модуля есть две точки соединения, вверху и внизу:

![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/d4ff394bf0c3c61735b18cb2eb1f09c3cfe950e5.png)  

Представьте, что вы можете присоединять только вспомогательные детали сверху и топливные баки и разделители снизу. Но сразу возникает две проблемы. Первая заключается в том, как визуально передать игроку, какие детали можно соединять друг с другом, а какие нет. Просто написать список поддерживаемых типов в подсказке к детали явно недостаточно. А во-вторых, эта система накладывает слишком большие ограничения. Что если я хочу присоединить шесть маленьких двигателей к топливному баку, вместо одного большого? А если нужно будет сделать так, чтобы к верху командного модуля крепились только некоторые вспомогательные детали?

Спустя недели страданий, проведенных в поисках лучшего решения, я, наконец, нашел одно. И как это обычно бывает, оно кажется очевидным, после того, как ты его нашел.  
Итак, встречайте два столпа системы соединений:

**Коннектор**:  
![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/4ec777536069b33519906fdf652bbad9b2c4472d.png)

**Слот подключения**:  
![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/495c0f51bbcf3a7e755412035831f08730edf307.png)

У каждой детали будет от одного до семи коннекторов или слотов, расположенных определенным образом. Крепления выше названных деталей сейчас выглядят следующим образом:

![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/73766104b517c16fcaaf731e19450e62e0ccafa5.png)

У вас может возникнуть вопрос: «Как это работает?». Ответ прост, все подчиняется одному правилу. Все коннекторы одной детали должны быть помещены в слоты другой. И это, по сути всё.

![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/6c779f016690d3d48d025316ba0ac499e29b397e.png)

Эта система позволит мне ограничивать некоторые сочетания деталей. Также теперь я могу попробовать усложнить физику ракет. В то же время у вас будет гораздо больше свободы в конструировании различных ракет из одного и того же набора деталей. К примеру, вы можете присоединить два или три средних двигателя (с двумя коннекторами) к топливному баку, упомянутому выше. Или от одного до семи маленьких двигателей с одним коннектором!

Также эти соединения могут быть легко представлены в интерфейсе выбора деталей:

![](https://steamcdn-a.akamaihd.net/steamcommunity/public/images/clans/34094219/057eabf7265fa3733d49f7851aa503fa88395846.png)
_Я также экспериментирую над цветовой схемой интерфейса, что можно увидеть на этой картинке_

Хотя описанная система довольно проста с точки зрения игрока, с точки зрения реализации это настоящий кошмар, и она сдвинет релиз игры еще дальше. Но я думаю, что оно того стоит. Также у меня есть несколько идей о том, как расширить эту систему, практически не усложняя текущий набор правил.

Итак, что вы думаете об этой системе? Я ценю все отзывы, всегда их читаю и принимаю к сведению, поэтому не стесняйтесь комментировать.
